// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model TypeJob {
  id_type_job   Int          @id @default(autoincrement())
  type_job_name String       @db.VarChar(150)
  typeDetails   TypeDetail[]
}

model TypeDetail {
  id_type_detail Int          @id @default(autoincrement())
  detail_name    String       @db.VarChar(150)
  image          String       @db.VarChar(255)
  id_type_job    Int
  typeJob        TypeJob      @relation(fields: [id_type_job], references: [id_type_job])
  jobCatalog     JobCatalog[]
}

model JobCatalog {
  id_job_catalog   Int        @id @default(autoincrement())
  name_job_catalog String     @db.VarChar(150)
  id_type_detail   Int
  typeDetail       TypeDetail @relation(fields: [id_type_detail], references: [id_type_detail])
  jobs             Job[]
}

model User {
  id_user       Int       @id @default(autoincrement())
  name          String    @db.VarChar(50)
  email         String    @db.VarChar(150)
  password      String    @db.VarChar(255)
  phone         String    @db.VarChar(50)
  birth_day     DateTime?
  gender        Boolean
  role          String    @db.VarChar(150)
  skill         String[]  @db.VarChar(255)
  certification String[]  @db.VarChar(255)
  hash          String?   @db.VarChar(255)
  hashedRt      String?   @db.VarChar(255)
  jobs          Job[]
  hiredBy       HireJob[]
  comments      Comment[]
}

model Job {
  id_job            Int        @id @default(autoincrement())
  job_name          String     @db.VarChar(150)
  rate              String     @db.VarChar(255)
  salary            Int
  image             String     @db.VarChar(255)
  describe          String     @db.VarChar(2000)
  short_description String     @db.VarChar(255)
  star              Int
  id_job_catalog    Int
  id_creator        Int
  creator           User       @relation(fields: [id_creator], references: [id_user])
  hiredBy           HireJob[]
  comments          Comment[]
  jobCatalog        JobCatalog @relation(fields: [id_job_catalog], references: [id_job_catalog])
}

model HireJob {
  id_hire_job Int      @id @default(autoincrement())
  id_job      Int
  id_user     Int
  date_hire   DateTime
  complete    Boolean
  job         Job      @relation(fields: [id_job], references: [id_job])
  user        User     @relation(fields: [id_user], references: [id_user])
}

model Comment {
  id_comment   Int      @id @default(autoincrement())
  id_job       Int
  id_user      Int
  date_comment DateTime
  content      String   @db.VarChar(255)
  star_comment Int
  job          Job      @relation(fields: [id_job], references: [id_job])
  user         User     @relation(fields: [id_user], references: [id_user])
}
